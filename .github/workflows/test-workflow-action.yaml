name: "test-workflow"
on: 
  workflow_dispatch:
    inputs:
      tenant:
        description: Environment id where the schema is deployed.
        required: true
      environment:
        description: Tenant for which the schemas will be deployed
        required: true

jobs:
  test-workflow:
    env:
      GITHUB_REPOSITORY: 'extensionlib'
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [12.x]
    steps:
      - uses: actions/checkout@v2
      - name: Verify Subjects
        uses: ./packages/validate-schema-action
        with:
          subjects-path: './packages/validate-schema-action/test-data/complex-valid-subjects'
      - name: Publish Subjects
        uses: ./packages/schema-publisher-action
        with:
          subjects-path: './packages/schema-publisher-action/test-data/complex-valid-subjects'
          tenant: '${{ github.event.inputs.tenant }}'
          environment: '${{ github.event.inputs.environment }}'